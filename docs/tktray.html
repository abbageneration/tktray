<html><head>
<title>tktray - tktray</title>
<style type="text/css"><!--
    HTML {
	background: 	#FFFFFF;
	color: 		black;
    }
    BODY {
	background: 	#FFFFFF;
	color:	 	black;
    }
    DIV.doctools {
	margin-left:	10%;
	margin-right:	10%;
    }
    DIV.doctools H1,DIV.doctools H2 {
	margin-left:	-5%;
    }
    H1, H2, H3, H4 {
	margin-top: 	1em;
	font-family:	sans-serif;
	font-size:	large;
	color:		#005A9C;
	background: 	transparent;
	text-align:		left;
    }
    H1.title {
	text-align: center;
    }
    UL,OL {
	margin-right: 0em;
	margin-top: 3pt;
	margin-bottom: 3pt;
    }
    UL LI {
	list-style: disc;
    }
    OL LI {
	list-style: decimal;
    }
    DT {
	padding-top: 	1ex;
    }
    UL.toc,UL.toc UL, UL.toc UL UL {
	font:		normal 12pt/14pt sans-serif;
	list-style:	none;
    }
    LI.section, LI.subsection {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding: 	0em;
    }
    PRE {
	display: 	block;
	font-family:	monospace;
	white-space:	pre;
	margin:		0%;
	padding-top:	0.5ex;
	padding-bottom:	0.5ex;
	padding-left:	1ex;
	padding-right:	1ex;
	width:		100%;
    }
    PRE.example {
	color: 		black;
	background: 	#f5dcb3;
	border:		1px solid black;
    }
    UL.requirements LI, UL.syntax LI {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding:	0em;
    }
    DIV.synopsis {
	color: 		black;
	background: 	#80ffff;
	border:		1px solid black;
	font-family:	serif;
	margin-top: 	1em;
	margin-bottom: 	1em;
    }
    UL.syntax {
	margin-top: 	1em;
	border-top:	1px solid black;
    }
    UL.requirements {
	margin-bottom: 	1em;
	border-bottom:	1px solid black;
    }
--></style>
</head>
<! -- Generated from file 'tktray.man' by tcllib/doctools with format 'html'
   -->
<! -- Copyright &copy; 2005, Anton Kovalenko
   -->
<! -- CVS: $Id$ tktray.n
   -->
<body><div class="doctools">
<h1 class="title">tktray(n) 1.0 tktray &quot;tktray&quot;</h1>
<div id="name" class="section"><h2><a name="name">Name</a></h2>
<p>tktray - System Tray Icon Support for Tk on X11</p>
</div>
<div id="toc" class="section"><h2><a name="toc">Table Of Contents</a></h2>
<ul class="toc">
<li class="section"><a href="#toc">Table Of Contents</a></li>
<li class="section"><a href="#synopsis">Synopsis</a></li>
<li class="section"><a href="#section1">Description</a></li>
<li class="section"><a href="#section2">COMMANDS</a></li>
<li class="section"><a href="#section3">WINDOW MANAGEMENT</a></li>
<li class="section"><a href="#section4">AUTHORS</a></li>
<li class="section"><a href="#keywords">Keywords</a></li>
<li class="section"><a href="#copyright">Copyright</a></li>
</ul>
</div>
<div id="synopsis" class="section"><h2><a name="synopsis">Synopsis</a></h2>
<div class="synopsis">
<ul class="requirements">
<li>package require <b class="pkgname">Tcl 8.4</b></li>
<li>package require <b class="pkgname">tktray <span class="opt">?1.0?</span></b></li>
</ul>
<ul class="syntax">
<li><a href="#1"><b class="cmd">tktray::icon</b> <i class="arg">pathName</i> <span class="opt">?<i class="arg">options</i>?</span></a></li>
<li><a href="#2"><i class="arg">pathName</i> <b class="method">configure</b> <span class="opt">?<i class="arg">options</i>?</span></a></li>
<li><a href="#3"><i class="arg">pathName</i> <b class="method">bbox</b></a></li>
</ul>
</div>
</div>
<div id="section1" class="section"><h2><a name="section1">Description</a></h2>
<p>Tktray is an extension that is able to create system tray icons.
It follows <a href="http://www.freedesktop.org">http://www.freedesktop.org</a>
specifications when looking up the system tray 
manager. This protocol is supported by modern versions
of KDE and Gnome panels, and by some other panel-like application.</p>
</div>
<div id="section2" class="section"><h2><a name="section2">COMMANDS</a></h2>
<dl class="definitions">
<dt><a name="1"><b class="cmd">tktray::icon</b> <i class="arg">pathName</i> <span class="opt">?<i class="arg">options</i>?</span></a></dt>
<dd><p>Create a new icon for the system tray. 
The application managing the system tray is notified about the new icon.
It normally results in the icon being added to the tray.
If there is no system tray at the icon creation time, the icon will be
invisible. When a new system tray appears, the icon will be added to
it. Since tktray 1.3, when the tray crashes and destroys your icon, it
will be recreated on a new system tray when it's available.</p>
<dl class="options">
<dt><b class="option">-class</b></dt>
<dd><p>WM_CLASS attribute for the icon window. Tray manager may use class name
   to remember icon position or other attributes. This name may also be used 
   for event binding.</p></dd>
<dt><b class="option">-image</b></dt>
<dd><p>image to show in the system tray. Since tktray 1.3, image type &quot;photo&quot;
   is not mandatory anymore.
   The icon will be automatically redrawn or resized 
   appropriately on any image modifications.</p></dd>
<dt><b class="option">-shape</b></dt>
<dd><p>Boolean flag, defaulting to false, indicating if
   transparency data of the photo should be used to set 
   the window's shape.
   An icon will usually look fine when this flag is off
   and ugly when it's on. Mouse events from transparent
   areas (alpha=0) are not delivered to your icon in this mode.
   
   Allever there is a situation when -shape 1 is better.  If your
   system tray is all sooo beautiful, with gradients and transparency
   and bells and whistles, BUT your icons are simple, with alpha
   channel that is either 0.0 or 1.0 at any point, and they are
   composed from rectangular pieces: -shape 1 may look less ugly
   and less inconvenient in these conditions.</p></dd>
<dt><b class="option">-visible</b></dt>
<dd><p>boolean value indicating whether the icon must be visible. 
   The system tray manager continues to manage the icon whether it is
   visible or not. Thus  when invisible icon becomes visible, its position
   on the system tray is likely to remain the same.</p></dd>
</dl></dd>
<dt><a name="2"><i class="arg">pathName</i> <b class="method">configure</b> <span class="opt">?<i class="arg">options</i>?</span></a></dt>
<dd><p>Modify icon's options after it was created.</p></dd>
<dt><a name="3"><i class="arg">pathName</i> <b class="method">bbox</b></a></dt>
<dd><p>Get the list of left, top, right and bottom coordinates of the icon
   relative to the root window of the icon's screen.
   This command should be used in preference to <b class="cmd">winfo rootx</b>
   and <b class="cmd">winfo rooty</b> to get icon location, though the latter may
   seem to work on your system.
   Bounding box information is updated asynchronously. Don't rely on
   its correctness on script startup, just after icon creation.  
   This command is for event handlers:  on &lt;ButtonPress-3&gt;
   you'd like to have a popup menu, but where it should be posted?
   Use %W bbox to determine it right at the moment when a click happened.</p></dd>
</dl>
</div>
<div id="section3" class="section"><h2><a name="section3">WINDOW MANAGEMENT</a></h2>
<p>Current implementation of tktray is designed to present an
   interface of a usual toplevel window, but there are some important
   differences (some of them may come up later). System Tray
   specification is based on XEMBED protocol, and the later has a
   problem: when the embedder crashes, nothing can prevent embedded
   windows from destruction.
   Since tktray 1.3, no explicit icon recreation code is required on
   Tcl level. The widget was split in two: one represented by a
   caller-specified name, and another (currently $path.inner) that
   exists only when a tray is available (and dies and comes back and
   so on).
   This solution has some disadvantages as well.  User-created widget
   is not mapped at all, thus it can't be used any more as a parent
   for other widgets, showing them instead of an image. A temporal
   inner window, however, may contain widgets.
   This version introduces two virtual events, &lt;&lt;IconConfigure&gt;&gt; and
   &lt;&lt;IconDestroy&gt;&gt;. The first is generated when an icon (the inner
   window) appears on screen, and when it's moved, resized or changed
   in some other way.  The second is generated when the inner window
   is destroyed (you may bind to $icon.inner &lt;Destroy&gt; as well).
   It's not recommended to build complex GUIs in the system tray. Also
   note that the correct handling of the keyboard input is unlikely to
   become possible. Events aren't</p>
</div>
<div id="section4" class="section"><h2><a name="section4">AUTHORS</a></h2>
<p>Anton Kovalenko
See <a href="http://www.sw4me.com/wiki/Tktray">http://www.sw4me.com/wiki/Tktray</a>.</p>
</div>
<div id="keywords" class="section"><h2><a name="keywords">Keywords</a></h2>
<p>icons, system tray, taskbar</p>
</div>
<div id="copyright" class="section"><h2><a name="copyright">Copyright</a></h2>
<p>Copyright &copy; 2005, Anton Kovalenko</p>
</div>
</div></body></html>
